<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Package Comparison · Margins.jl</title><meta name="title" content="Package Comparison · Margins.jl"/><meta property="og:title" content="Package Comparison · Margins.jl"/><meta property="twitter:title" content="Package Comparison · Margins.jl"/><meta name="description" content="Documentation for Margins.jl."/><meta property="og:description" content="Documentation for Margins.jl."/><meta property="twitter:description" content="Documentation for Margins.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Margins.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Margins.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../mathematical_foundation/">Mathematical Foundation</a></li><li><a class="tocitem" href="../computational_architecture/">Computational Architecture</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../reference_grids/">Reference Grids</a></li><li><a class="tocitem" href="../profile_margins/">Profile Analysis</a></li><li><a class="tocitem" href="../population_scenarios/">Population Scenarios</a></li><li><a class="tocitem" href="../second_differences/">Second Differences</a></li><li><a class="tocitem" href="../weights/">Weights</a></li><li><a class="tocitem" href="../grouping/">Population Grouping</a></li><li><a class="tocitem" href="../backend_selection/">Backend Selection</a></li><li><a class="tocitem" href="../performance/">Performance Guide</a></li><li><a class="tocitem" href="../advanced/">Advanced Features</a></li></ul></li><li><a class="tocitem" href="../stata_migration/">Migration Guide</a></li><li class="is-active"><a class="tocitem" href>Package Comparison</a><ul class="internal"><li><a class="tocitem" href="#Stata-Migration-Guide"><span>Stata Migration Guide</span></a></li><li><a class="tocitem" href="#Design-Philosophy"><span>Design Philosophy</span></a></li><li><a class="tocitem" href="#Feature-Comparison"><span>Feature Comparison</span></a></li><li><a class="tocitem" href="#Performance-Characteristics"><span>Performance Characteristics</span></a></li><li><a class="tocitem" href="#API-Design-Comparison"><span>API Design Comparison</span></a></li><li><a class="tocitem" href="#Ecosystem-Integration"><span>Ecosystem Integration</span></a></li><li><a class="tocitem" href="#Mathematical-Rigor"><span>Mathematical Rigor</span></a></li><li><a class="tocitem" href="#Margins.jl-Approach"><span>Margins.jl Approach</span></a></li><li><a class="tocitem" href="#Future-Development"><span>Future Development</span></a></li><li><a class="tocitem" href="#Ecosystem-Maturity-Considerations"><span>Ecosystem Maturity Considerations</span></a></li><li><a class="tocitem" href="#Conclusion"><span>Conclusion</span></a></li></ul></li><li><a class="tocitem" href="../api/">API Reference</a></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Package Comparison</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Package Comparison</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/emfeltham/Margins.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/emfeltham/Margins.jl/" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Margins.jl-in-Context:-A-Comparison-with-Other-Marginal-Effects-Packages"><a class="docs-heading-anchor" href="#Margins.jl-in-Context:-A-Comparison-with-Other-Marginal-Effects-Packages">Margins.jl in Context: A Comparison with Other Marginal Effects Packages</a><a id="Margins.jl-in-Context:-A-Comparison-with-Other-Marginal-Effects-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#Margins.jl-in-Context:-A-Comparison-with-Other-Marginal-Effects-Packages" title="Permalink"></a></h1><p>This document provides a comprehensive assessment of how Margins.jl compares to other marginal effects implementations across languages. It serves as both a technical comparison and a migration guide for researchers familiar with other tools.</p><p><strong>Key sections:</strong></p><ul><li><strong>Stata Migration Guide</strong> - Direct command translations and examples for Stata users</li><li><strong>Feature Comparisons</strong> - Detailed capability comparisons across packages</li><li><strong>Performance Analysis</strong> - Computational approach differences and implications</li><li><strong>Technical Details</strong> - Mathematical rigor and implementation approaches</li></ul><h2 id="Stata-Migration-Guide"><a class="docs-heading-anchor" href="#Stata-Migration-Guide">Stata Migration Guide</a><a id="Stata-Migration-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Stata-Migration-Guide" title="Permalink"></a></h2><p>For researchers familiar with Stata&#39;s <code>margins</code> command, Margins.jl provides equivalent functionality with a clean conceptual mapping. The key difference is that Margins.jl separates the choice of <em>where</em> to evaluate (population vs profile) from <em>what</em> to compute (effects vs predictions).</p><h3 id="Basic-Command-Translation"><a class="docs-heading-anchor" href="#Basic-Command-Translation">Basic Command Translation</a><a id="Basic-Command-Translation-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Command-Translation" title="Permalink"></a></h3><table><tr><th style="text-align: right">Stata Command</th><th style="text-align: right">Margins.jl Equivalent</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><code>margins, dydx(*)</code></td><td style="text-align: right"><code>population_margins(model, data; type=:effects)</code></td><td style="text-align: right">Average marginal effects (AME)</td></tr><tr><td style="text-align: right"><code>margins, at(means) dydx(*)</code></td><td style="text-align: right"><code>profile_margins(model, data, means_grid(data); type=:effects)</code></td><td style="text-align: right">Marginal effects at means (MEM)</td></tr><tr><td style="text-align: right"><code>margins</code></td><td style="text-align: right"><code>population_margins(model, data; type=:predictions)</code></td><td style="text-align: right">Average adjusted predictions</td></tr><tr><td style="text-align: right"><code>margins, at(means)</code></td><td style="text-align: right"><code>profile_margins(model, data, means_grid(data); type=:predictions)</code></td><td style="text-align: right">Adjusted predictions at means</td></tr></table><h3 id="Advanced-Command-Translation"><a class="docs-heading-anchor" href="#Advanced-Command-Translation">Advanced Command Translation</a><a id="Advanced-Command-Translation-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Command-Translation" title="Permalink"></a></h3><table><tr><th style="text-align: right">Stata Command</th><th style="text-align: right">Margins.jl Equivalent</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><code>margins, at(x=0 x=1 x=2)</code></td><td style="text-align: right"><code>profile_margins(model, data, cartesian_grid(x=[0,1,2]); type=:predictions)</code></td><td style="text-align: right">Multiple evaluation points</td></tr><tr><td style="text-align: right"><code>margins, at(x=0 z=1) at(x=1 z=2)</code></td><td style="text-align: right"><code>profile_margins(model, data, DataFrame(x=[0,1], z=[1,2]); type=:predictions)</code></td><td style="text-align: right">Custom scenarios</td></tr><tr><td style="text-align: right"><code>margins, over(group)</code></td><td style="text-align: right"><code>population_margins(model, data; groups=:group)</code></td><td style="text-align: right">Subgroup analysis</td></tr><tr><td style="text-align: right"><code>margins, dydx(x) at(z=(0 1))</code></td><td style="text-align: right"><code>profile_margins(model, data, cartesian_grid(z=[0,1]); type=:effects, vars=[:x])</code></td><td style="text-align: right">Specific variables</td></tr></table><h3 id="Elasticity-Commands"><a class="docs-heading-anchor" href="#Elasticity-Commands">Elasticity Commands</a><a id="Elasticity-Commands-1"></a><a class="docs-heading-anchor-permalink" href="#Elasticity-Commands" title="Permalink"></a></h3><table><tr><th style="text-align: right">Stata Command</th><th style="text-align: right">Margins.jl Equivalent</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><code>margins, eyex(*)</code></td><td style="text-align: right"><code>population_margins(model, data; type=:effects, measure=:elasticity)</code></td><td style="text-align: right">Elasticities</td></tr><tr><td style="text-align: right"><code>margins, eydx(*)</code></td><td style="text-align: right"><code>population_margins(model, data; type=:effects, measure=:semielasticity_eydx)</code></td><td style="text-align: right">Y semi-elasticity</td></tr><tr><td style="text-align: right"><code>margins, dyex(*)</code></td><td style="text-align: right"><code>population_margins(model, data; type=:effects, measure=:semielasticity_dyex)</code></td><td style="text-align: right">X semi-elasticity</td></tr></table><h3 id="Conceptual-Differences"><a class="docs-heading-anchor" href="#Conceptual-Differences">Conceptual Differences</a><a id="Conceptual-Differences-1"></a><a class="docs-heading-anchor-permalink" href="#Conceptual-Differences" title="Permalink"></a></h3><p><strong>Stata approach</strong>: Single <code>margins</code> command with many options</p><ul><li>Combines evaluation point and computation type in complex syntax</li><li>Options like <code>at()</code>, <code>dydx()</code>, <code>over()</code> modify behavior</li></ul><p><strong>Margins.jl approach</strong>: Separate functions for different purposes</p><ul><li><code>population_margins()</code> for sample-wide averages (AME/AAP)</li><li><code>profile_margins()</code> for scenario-specific analysis (MEM/APM)</li><li>Clean parameter separation: <code>type</code> (effects/predictions), <code>measure</code> (elasticity type), reference grids for scenarios</li></ul><h3 id="Migration-Example"><a class="docs-heading-anchor" href="#Migration-Example">Migration Example</a><a id="Migration-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Migration-Example" title="Permalink"></a></h3><p>Here&#39;s a complete example showing equivalent analysis:</p><p><strong>Stata:</strong></p><pre><code class="language-stata hljs">* Fit logistic model
logit employed education age c.age#c.age

* Average marginal effects
margins, dydx(*)

* Effects at means
margins, at(means) dydx(*)

* Effects at specific ages
margins, at(age=(25 35 45 55)) dydx(education)</code></pre><p><strong>Margins.jl:</strong></p><pre><code class="language-julia hljs">using Margins, GLM, DataFrames

# Fit logistic model  
model = glm(@formula(employed ~ education + age + age^2), data, Binomial(), LogitLink())

# Average marginal effects
ame = population_margins(model, data; type=:effects)
DataFrame(ame)

# Effects at means
mem = profile_margins(model, data, means_grid(data); type=:effects) 
DataFrame(mem)

# Effects at specific ages
age_effects = profile_margins(model, data, 
    cartesian_grid(age=[25, 35, 45, 55]); 
    vars=[:education], 
    type=:effects
)
DataFrame(age_effects)</code></pre><h3 id="Migration-Considerations"><a class="docs-heading-anchor" href="#Migration-Considerations">Migration Considerations</a><a id="Migration-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Migration-Considerations" title="Permalink"></a></h3><p><strong>Performance characteristics</strong>: Different computational approaches may affect performance, particularly for:</p><ul><li>Large datasets (&gt;10k observations)</li><li>Complex profile specifications</li><li>Repeated analysis workflows</li></ul><p><strong>Conceptual differences</strong>: The population vs profile distinction provides an alternative way to think about marginal analysis:</p><ul><li><code>population_margins()</code> characterizes sample-wide patterns</li><li><code>profile_margins()</code> examines specific scenarios</li></ul><p><strong>Ecosystem integration</strong>: Julia&#39;s statistical ecosystem provides:</p><ul><li>Mixed models via MixedModels.jl</li><li>Robust standard errors via CovarianceMatrices.jl</li><li>Custom model types via StatsAPI</li></ul><h2 id="Design-Philosophy"><a class="docs-heading-anchor" href="#Design-Philosophy">Design Philosophy</a><a id="Design-Philosophy-1"></a><a class="docs-heading-anchor-permalink" href="#Design-Philosophy" title="Permalink"></a></h2><p>Margins.jl was designed with several key principles:</p><ol><li><strong>Performance first</strong>: Built on FormulaCompiler.jl for zero-allocation computation paths</li><li><strong>Conceptual clarity</strong>: Population vs Profile framework instead of statistical acronyms</li><li><strong>Ecosystem integration</strong>: Works seamlessly with Julia&#39;s statistical ecosystem via StatsAPI</li><li><strong>Mathematical rigor</strong>: Proper gradient computation and delta-method standard errors throughout</li></ol><h2 id="Feature-Comparison"><a class="docs-heading-anchor" href="#Feature-Comparison">Feature Comparison</a><a id="Feature-Comparison-1"></a><a class="docs-heading-anchor-permalink" href="#Feature-Comparison" title="Permalink"></a></h2><h3 id="Core-Marginal-Effects-Functionality"><a class="docs-heading-anchor" href="#Core-Marginal-Effects-Functionality">Core Marginal Effects Functionality</a><a id="Core-Marginal-Effects-Functionality-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Marginal-Effects-Functionality" title="Permalink"></a></h3><table><tr><th style="text-align: right">Feature</th><th style="text-align: right">Margins.jl</th><th style="text-align: right">Effects.jl</th><th style="text-align: right">R margins</th><th style="text-align: right">Stata margins</th><th style="text-align: right">Python statsmodels</th></tr><tr><td style="text-align: right">Population marginal effects (AME)</td><td style="text-align: right"></td><td style="text-align: right">✗</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">Profile marginal effects (MEM/MER)</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">(at=&#39;mean&#39; only)</td></tr><tr><td style="text-align: right">Elasticities</td><td style="text-align: right">(3 types)</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">(basic)</td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Flexible profile specification</td><td style="text-align: right">(Dict + table)</td><td style="text-align: right">(kwargs)</td><td style="text-align: right">(at=)</td><td style="text-align: right">(at())</td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Categorical contrasts</td><td style="text-align: right">(baseline/pairwise)</td><td style="text-align: right">(basic)</td><td style="text-align: right">(basic)</td><td style="text-align: right"></td><td style="text-align: right">(basic)</td></tr><tr><td style="text-align: right">Grouping/stratification</td><td style="text-align: right">(over/within/by)</td><td style="text-align: right">✗</td><td style="text-align: right">(basic)</td><td style="text-align: right">(over/by)</td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Observation weights</td><td style="text-align: right"></td><td style="text-align: right">✗</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">Robust standard errors</td><td style="text-align: right">(via CovarianceMatrices)</td><td style="text-align: right">(via vcov)</td><td style="text-align: right">(sandwich)</td><td style="text-align: right">(vce())</td><td style="text-align: right">(limited)</td></tr></table><h3 id="Advanced-Features"><a class="docs-heading-anchor" href="#Advanced-Features">Advanced Features</a><a id="Advanced-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Features" title="Permalink"></a></h3><table><tr><th style="text-align: right">Feature</th><th style="text-align: right">Margins.jl</th><th style="text-align: right">Effects.jl</th><th style="text-align: right">R margins</th><th style="text-align: right">Stata margins</th><th style="text-align: right">Python statsmodels</th></tr><tr><td style="text-align: right">Mixed models</td><td style="text-align: right">(automatic)</td><td style="text-align: right"></td><td style="text-align: right">(manual)</td><td style="text-align: right"></td><td style="text-align: right">(limited)</td></tr><tr><td style="text-align: right">Multiple backends (FD/AD)</td><td style="text-align: right"></td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Zero-allocation paths</td><td style="text-align: right"></td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Compiled evaluation</td><td style="text-align: right"></td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right"></td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Table-based profiles</td><td style="text-align: right"></td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td><td style="text-align: right">✗</td></tr><tr><td style="text-align: right">Multiple comparison adjustments</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">(basic)</td></tr></table><h3 id="Model-Support"><a class="docs-heading-anchor" href="#Model-Support">Model Support</a><a id="Model-Support-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Support" title="Permalink"></a></h3><table><tr><th style="text-align: right">Models</th><th style="text-align: right">Margins.jl</th><th style="text-align: right">Effects.jl</th><th style="text-align: right">R margins</th><th style="text-align: right">Stata margins</th><th style="text-align: right">Python statsmodels</th></tr><tr><td style="text-align: right">Linear/GLM</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">Mixed effects</td><td style="text-align: right">(via StatsAPI)</td><td style="text-align: right"></td><td style="text-align: right">(some)</td><td style="text-align: right"></td><td style="text-align: right">(limited)</td></tr><tr><td style="text-align: right">Survival models</td><td style="text-align: right">Future</td><td style="text-align: right">Future</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">Custom models</td><td style="text-align: right">(via StatsAPI)</td><td style="text-align: right">(via StatsAPI)</td><td style="text-align: right">Varies</td><td style="text-align: right">Limited</td><td style="text-align: right">Varies</td></tr></table><h2 id="Performance-Characteristics"><a class="docs-heading-anchor" href="#Performance-Characteristics">Performance Characteristics</a><a id="Performance-Characteristics-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Characteristics" title="Permalink"></a></h2><h3 id="AME-Performance-Background"><a class="docs-heading-anchor" href="#AME-Performance-Background">AME Performance Background</a><a id="AME-Performance-Background-1"></a><a class="docs-heading-anchor-permalink" href="#AME-Performance-Background" title="Permalink"></a></h3><p>Average marginal effects (AME) have traditionally been slow because most implementations evaluate the fitted model once per observation to compute numerical derivatives. This creates O(n) complexity with substantial per-evaluation overhead. For large datasets, this computational cost often led researchers to use marginal effects at means (MEM) as a faster alternative.</p><h3 id="Computational-Approach"><a class="docs-heading-anchor" href="#Computational-Approach">Computational Approach</a><a id="Computational-Approach-1"></a><a class="docs-heading-anchor-permalink" href="#Computational-Approach" title="Permalink"></a></h3><p><strong>Margins.jl</strong>: Uses compiled formula evaluation with dual FD/AD backends. In indicative benchmark results, achieves approximately 50ns per marginal effect with zero allocations after warmup via FormulaCompiler.jl. Computes derivatives directly from compiled formulas rather than repeated model prediction calls.</p><p><strong>Effects.jl</strong>: Uses automatic differentiation (ForwardDiff.jl) for gradient computation with standard Julia model prediction. Clean implementation but allocates ~400-500 bytes per gradient computation.</p><p><strong>R margins</strong>: Interpretation-based approach requiring repeated <code>predict()</code> calls per observation. Generally slower for large datasets due to evaluation overhead (Leeper, 2017).</p><p><strong>Stata margins</strong>: Compiled implementation with good performance, but still uses interpretation-based approach. Closed-source implementation limits optimization possibilities.</p><p><strong>Python statsmodels</strong>: Mixed approach with some optimizations, but limited by Python overhead for large-scale AME computation.</p><h3 id="Performance-Differences"><a class="docs-heading-anchor" href="#Performance-Differences">Performance Differences</a><a id="Performance-Differences-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Differences" title="Permalink"></a></h3><p>The key difference is computational approach:</p><ul><li><strong>Traditional approach</strong>: n model evaluations × interpretation overhead  </li><li><strong>Margins.jl approach</strong>: Compiled formula evaluation (~7ns) + finite difference (~40ns) + delta-method SE (~10ns) = ~57ns per observation with zero allocations</li></ul><p>These architectural differences may become more noticeable with larger datasets.</p><h3 id="Benchmarking-Context"><a class="docs-heading-anchor" href="#Benchmarking-Context">Benchmarking Context</a><a id="Benchmarking-Context-1"></a><a class="docs-heading-anchor-permalink" href="#Benchmarking-Context" title="Permalink"></a></h3><p>While formal cross-language benchmarks are complex due to different implementations and ecosystems, indicative performance characteristics suggest architectural differences:</p><ul><li><strong>Small problems (n &lt; 1,000)</strong>: Most packages perform adequately, overhead differences typically negligible</li><li><strong>Medium problems (n ~ 10,000)</strong>: Different architectural approaches may show varying performance characteristics</li><li><strong>Large problems (n &gt; 100,000)</strong>: Architectural differences become more apparent, with allocation patterns affecting scalability</li></ul><p>Zero-allocation approaches can help AME computation scale with dataset size by avoiding additional memory allocation.</p><h2 id="API-Design-Comparison"><a class="docs-heading-anchor" href="#API-Design-Comparison">API Design Comparison</a><a id="API-Design-Comparison-1"></a><a class="docs-heading-anchor-permalink" href="#API-Design-Comparison" title="Permalink"></a></h2><h3 id="Conceptual-Framework"><a class="docs-heading-anchor" href="#Conceptual-Framework">Conceptual Framework</a><a id="Conceptual-Framework-1"></a><a class="docs-heading-anchor-permalink" href="#Conceptual-Framework" title="Permalink"></a></h3><p><strong>Margins.jl</strong>: Uses Population vs Profile framework with orthogonal parameters:</p><pre><code class="language-julia hljs">population_margins(model, data; type=:effects, measure=:elasticity)
profile_margins(model, data, means_grid(data); type=:effects)</code></pre><p><strong>Effects.jl</strong>: Function-based approach with keyword arguments:</p><pre><code class="language-julia hljs">effects(model; x1=0.5, x2=[0, 1])  # At specific values
effects(model, data)               # Average marginal effects</code></pre><p><strong>R margins</strong>: Function-based approach with extensive options:</p><pre><code class="language-r hljs">margins(model, data, at = list(x = c(-1, 0, 1)))</code></pre><p><strong>Stata margins</strong>: Command-based with extensive syntax:</p><pre><code class="language-stata hljs">margins, at(x=(-1 0 1)) dydx(x)</code></pre><p><strong>Python statsmodels</strong>: Method-based approach:</p><pre><code class="language-python hljs">marginal_effects = model.get_margeff(at=&#39;mean&#39;)</code></pre><h3 id="Strengths-and-Tradeoffs"><a class="docs-heading-anchor" href="#Strengths-and-Tradeoffs">Strengths and Tradeoffs</a><a id="Strengths-and-Tradeoffs-1"></a><a class="docs-heading-anchor-permalink" href="#Strengths-and-Tradeoffs" title="Permalink"></a></h3><p><strong>Margins.jl characteristics:</strong></p><ul><li>Conceptual separation of population vs profile approaches</li><li>Type-stable, composable design</li><li>Interface consistent across model types</li><li>Elasticity support across multiple measures</li><li>Focus on zero-allocation performance</li></ul><p><strong>Effects.jl characteristics:</strong></p><ul><li>Simple, focused API</li><li>Automatic differentiation integration</li><li>Lightweight implementation</li><li>Active development</li></ul><p><strong>Margins.jl limitations:</strong></p><ul><li>Newer package with smaller user base</li><li>Julia ecosystem required</li><li>Some Stata-specific syntax conveniences not implemented</li></ul><p><strong>Effects.jl limitations:</strong></p><ul><li>More limited feature set (no observation weights, limited grouping)</li><li>Less performance optimization</li><li>Fewer advanced statistical features</li></ul><h2 id="Ecosystem-Integration"><a class="docs-heading-anchor" href="#Ecosystem-Integration">Ecosystem Integration</a><a id="Ecosystem-Integration-1"></a><a class="docs-heading-anchor-permalink" href="#Ecosystem-Integration" title="Permalink"></a></h2><h3 id="Language-Ecosystems"><a class="docs-heading-anchor" href="#Language-Ecosystems">Language Ecosystems</a><a id="Language-Ecosystems-1"></a><a class="docs-heading-anchor-permalink" href="#Language-Ecosystems" title="Permalink"></a></h3><p><strong>Margins.jl</strong>: Integrates with Julia&#39;s statistical ecosystem via StatsAPI. Models that implement the standard interface work with the package, including mixed models and custom models.</p><p><strong>Effects.jl</strong>: Also uses StatsAPI for integration, works well with standard Julia statistical models. More lightweight approach with fewer dependencies.</p><p><strong>R margins</strong>: Good integration with R&#39;s modeling ecosystem, though sometimes requires package-specific implementations.</p><p><strong>Stata margins</strong>: Excellent integration within Stata&#39;s ecosystem, but limited extensibility.</p><p><strong>Python statsmodels</strong>: Part of the statsmodels ecosystem with good integration there, more limited beyond.</p><h2 id="Mathematical-Rigor"><a class="docs-heading-anchor" href="#Mathematical-Rigor">Mathematical Rigor</a><a id="Mathematical-Rigor-1"></a><a class="docs-heading-anchor-permalink" href="#Mathematical-Rigor" title="Permalink"></a></h2><h3 id="Gradient-Computation"><a class="docs-heading-anchor" href="#Gradient-Computation">Gradient Computation</a><a id="Gradient-Computation-1"></a><a class="docs-heading-anchor-permalink" href="#Gradient-Computation" title="Permalink"></a></h3><p><strong>Margins.jl</strong>: Uses gradient computation with delta-method standard errors. Provides both finite differences and automatic differentiation backends.</p><p><strong>Other packages</strong>: Use various approaches to derivative computation, with implementation details varying by package and language ecosystem.</p><h3 id="Standard-Error-Computation"><a class="docs-heading-anchor" href="#Standard-Error-Computation">Standard Error Computation</a><a id="Standard-Error-Computation-1"></a><a class="docs-heading-anchor-permalink" href="#Standard-Error-Computation" title="Permalink"></a></h3><p>Most packages implement delta-method standard errors, with different approaches to optimization and numerical accuracy.</p><h2 id="Margins.jl-Approach"><a class="docs-heading-anchor" href="#Margins.jl-Approach">Margins.jl Approach</a><a id="Margins.jl-Approach-1"></a><a class="docs-heading-anchor-permalink" href="#Margins.jl-Approach" title="Permalink"></a></h2><p>Margins.jl brings several distinctive features to marginal effects analysis:</p><p><strong>Computational approach</strong>: Uses compiled formula evaluation with zero-allocation performance paths, which in indicative benchmarks can be beneficial for large-scale analysis and repeated computations.</p><p><strong>Conceptual framework</strong>: Separates the question of <em>where</em> to evaluate (population vs profile) from <em>what</em> to compute (effects vs predictions), providing conceptual clarity in analysis design.</p><p><strong>Elasticity support</strong>: Provides comprehensive elasticity computation including standard elasticities, x-semi-elasticities, and y-semi-elasticities across both population and profile approaches.</p><p>For population-level counterfactuals, see <a href="../population_scenarios/">Population Scenarios</a>. For profile evaluation at specified covariate combinations, see <a href="../reference_grids/">Reference Grids</a>.</p><p><strong>Ecosystem integration</strong>: Works within Julia&#39;s statistical ecosystem, supporting mixed models, robust standard errors, and custom model types through common interfaces.</p><h2 id="Future-Development"><a class="docs-heading-anchor" href="#Future-Development">Future Development</a><a id="Future-Development-1"></a><a class="docs-heading-anchor-permalink" href="#Future-Development" title="Permalink"></a></h2><p>Margins.jl development benefits from Julia&#39;s evolving ecosystem. Relevant factors for future development include:</p><ol><li><strong>Language characteristics</strong>: Julia&#39;s design enables certain types of optimizations</li><li><strong>Ecosystem integration</strong>: Statistical methods can integrate via common interfaces</li><li><strong>Development activity</strong>: Both Margins.jl and FormulaCompiler.jl continue active development</li></ol><h2 id="Ecosystem-Maturity-Considerations"><a class="docs-heading-anchor" href="#Ecosystem-Maturity-Considerations">Ecosystem Maturity Considerations</a><a id="Ecosystem-Maturity-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Ecosystem-Maturity-Considerations" title="Permalink"></a></h2><p>An important factor in package selection is ecosystem maturity and validation in applied settings:</p><p><strong>Established packages</strong> (Stata margins, R margins): These have extensive validation through years of use in econometric research and applied statistics. Their implementations have been tested across diverse research contexts and publication processes.</p><p><strong>Julia ecosystem</strong>: While Julia&#39;s statistical ecosystem is rapidly maturing, it represents a more experimental environment. Packages like Margins.jl and Effects.jl are newer and have smaller user bases compared to established tools in Stata and R.</p><p><strong>Practical implications</strong>:</p><ul><li>For high-stakes research requiring maximum confidence in implementation, established packages may be preferable</li><li>For research prioritizing computational performance or new methodological approaches, newer Julia packages may offer advantages</li><li>Cross-validation of results across packages can provide additional confidence when using newer implementations</li></ul><h2 id="Conclusion"><a class="docs-heading-anchor" href="#Conclusion">Conclusion</a><a id="Conclusion-1"></a><a class="docs-heading-anchor-permalink" href="#Conclusion" title="Permalink"></a></h2><p>Margins.jl provides an alternative approach with different performance characteristics and API design. Being newer than established packages, it represents a different set of tradeoffs in the marginal effects landscape.</p><p>Package selection depends on specific requirements, use cases, and tolerance for ecosystem maturity differences. Margins.jl offers a different approach to marginal effects computation that may be beneficial in certain contexts, while established packages provide proven reliability in applied research settings.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../stata_migration/">« Migration Guide</a><a class="docs-footer-nextpage" href="../api/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Thursday 23 October 2025 18:15">Thursday 23 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
